<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="ACTIVITY" height="1318px" preserveAspectRatio="none" style="width:405px;height:1318px;background:#FFFFFF;" version="1.1" viewBox="0 0 405 1318" width="405px" zoomAndPan="magnify"><defs/><g><ellipse cx="160.4585" cy="20" fill="#222222" rx="10" ry="10" style="stroke:#222222;stroke-width:1;"/><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="107.2051" x="106.856" y="50"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="87.2051" x="116.856" y="71.1387">enqueue(task)</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="114.8398" x="103.0386" y="152.3711"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="94.8398" x="113.0386" y="173.5098">scheduleFlush()</text><polygon fill="#F1F1F1" points="126.481,103.9688,194.436,103.9688,206.436,115.9688,194.436,127.9688,126.481,127.9688,114.481,115.9688,126.481,103.9688" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="13.7017" x="164.4585" y="138.1792">no</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="67.9551" x="126.481" y="119.7769">&#191;scheduled?</text><polygon fill="#F1F1F1" points="160.4585,206.3398,172.4585,218.3398,160.4585,230.3398,148.4585,218.3398,160.4585,206.3398" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="124.0625" x="98.4272" y="250.3398"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="104.0625" x="108.4272" y="271.4785">Microtask: flush()</text><polygon fill="#F1F1F1" points="126.1399,360.019,194.7771,360.019,206.7771,372.019,194.7771,384.019,126.1399,384.019,114.1399,372.019,126.1399,360.019" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="68.6372" x="126.1399" y="375.8271">task == null</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="8.7871" x="105.3528" y="369.4248">s&#237;</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="73.1504" x="38" y="394.019"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="53.1504" x="48" y="415.1577">index++</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="99.1367" x="196.7734" y="394.019"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="79.1367" x="206.7734" y="415.1577">try run task()</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="210.3828" x="141.1504" y="496.3901"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="190.3828" x="151.1504" y="517.5288">promise.catch -&gt; errorHandler?</text><polygon fill="#F1F1F1" points="202.2317,447.9878,290.4519,447.9878,302.4519,459.9878,290.4519,471.9878,202.2317,471.9878,190.2317,459.9878,202.2317,447.9878" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="8.7871" x="250.3418" y="482.1982">s&#237;</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="88.2202" x="202.2317" y="463.7959">retorna Promise</text><polygon fill="#F1F1F1" points="246.3418,550.3589,258.3418,562.3589,246.3418,574.3589,234.3418,562.3589,246.3418,550.3589" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="95.5625" x="198.5605" y="594.3589"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="75.5625" x="208.5605" y="615.4976">catch (error)</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="142.0332" x="175.3252" y="648.3276"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="122.0332" x="185.3252" y="669.4663">errorHandler?(error)</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="139.5605" x="176.5615" y="702.2964"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="119.5605" x="186.5615" y="723.4351">queue[index] = null</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="73.1504" x="209.7666" y="756.2651"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="53.1504" x="219.7666" y="777.4038">index++</text><polygon fill="#F1F1F1" points="160.4585,796.2339,172.4585,808.2339,160.4585,820.2339,148.4585,808.2339,160.4585,796.2339" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="96.0957" x="112.4106" y="888.6362"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="76.0957" x="122.4106" y="909.7749">recursion++</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="201.623" x="59.647" y="991.0073"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="181.623" x="69.647" y="1012.146">errorHandler?(RecursionError)</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="60.0195" x="130.4487" y="1047.4917"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="40.0195" x="140.4487" y="1068.6304">reset()</text><ellipse cx="160.4585" cy="1112.4604" fill="none" rx="11" ry="11" style="stroke:#222222;stroke-width:1;"/><ellipse cx="160.4585" cy="1112.4604" fill="#222222" rx="6" ry="6" style="stroke:#222222;stroke-width:1;"/><polygon fill="#F1F1F1" points="79.1267,942.605,241.7903,942.605,253.7903,954.605,241.7903,966.605,79.1267,966.605,67.1267,954.605,79.1267,942.605" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="8.7871" x="164.4585" y="976.8154">s&#237;</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="162.6636" x="79.1267" y="958.4131">recursion &gt; MAX_RECURSION</text><polygon fill="#F1F1F1" points="125.1113,840.2339,195.8057,840.2339,207.8057,852.2339,195.8057,864.2339,125.1113,864.2339,113.1113,852.2339,125.1113,840.2339" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="8.7871" x="164.4585" y="874.4443">s&#237;</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="70.6943" x="125.1113" y="856.042">index &gt; limit</text><polygon fill="#F1F1F1" points="160.4585,1165.4604,172.4585,1177.4604,160.4585,1189.4604,148.4585,1177.4604,160.4585,1165.4604" style="stroke:#181818;stroke-width:0.5;"/><polygon fill="#F1F1F1" points="100.6997,304.3086,220.2173,304.3086,232.2173,316.3086,220.2173,328.3086,100.6997,328.3086,88.6997,316.3086,100.6997,304.3086" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="8.7871" x="164.4585" y="338.519">s&#237;</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="119.5176" x="100.6997" y="320.1167">index &lt; queue.length</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="60.0195" x="130.4487" y="1231.4604"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="40.0195" x="140.4487" y="1252.5991">reset()</text><ellipse cx="160.4585" cy="1296.4292" fill="none" rx="11" ry="11" style="stroke:#222222;stroke-width:1;"/><ellipse cx="160.4585" cy="1296.4292" fill="#222222" rx="6" ry="6" style="stroke:#222222;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="160.4585" x2="160.4585" y1="30" y2="50"/><polygon fill="#181818" points="156.4585,40,160.4585,50,164.4585,40,160.4585,44" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="160.4585" x2="160.4585" y1="127.9688" y2="152.3711"/><polygon fill="#181818" points="156.4585,142.3711,160.4585,152.3711,164.4585,142.3711,160.4585,146.3711" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="206.436" x2="227.8784" y1="115.9688" y2="115.9688"/><polygon fill="#181818" points="223.8784,159.3555,227.8784,169.3555,231.8784,159.3555,227.8784,163.3555" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="227.8784" x2="227.8784" y1="115.9688" y2="218.3398"/><line style="stroke:#181818;stroke-width:1;" x1="227.8784" x2="172.4585" y1="218.3398" y2="218.3398"/><polygon fill="#181818" points="182.4585,214.3398,172.4585,218.3398,182.4585,222.3398,178.4585,218.3398" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="160.4585" x2="160.4585" y1="186.3398" y2="206.3398"/><polygon fill="#181818" points="156.4585,196.3398,160.4585,206.3398,164.4585,196.3398,160.4585,200.3398" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="160.4585" x2="160.4585" y1="83.9688" y2="103.9688"/><polygon fill="#181818" points="156.4585,93.9688,160.4585,103.9688,164.4585,93.9688,160.4585,97.9688" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="160.4585" x2="160.4585" y1="230.3398" y2="250.3398"/><polygon fill="#181818" points="156.4585,240.3398,160.4585,250.3398,164.4585,240.3398,160.4585,244.3398" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="246.3418" x2="246.3418" y1="471.9878" y2="496.3901"/><polygon fill="#181818" points="242.3418,486.3901,246.3418,496.3901,250.3418,486.3901,246.3418,490.3901" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="302.4519" x2="361.5332" y1="459.9878" y2="459.9878"/><polygon fill="#181818" points="357.5332,503.3745,361.5332,513.3745,365.5332,503.3745,361.5332,507.3745" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="361.5332" x2="361.5332" y1="459.9878" y2="562.3589"/><line style="stroke:#181818;stroke-width:1;" x1="361.5332" x2="258.3418" y1="562.3589" y2="562.3589"/><polygon fill="#181818" points="268.3418,558.3589,258.3418,562.3589,268.3418,566.3589,264.3418,562.3589" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="246.3418" x2="246.3418" y1="530.3589" y2="550.3589"/><polygon fill="#181818" points="242.3418,540.3589,246.3418,550.3589,250.3418,540.3589,246.3418,544.3589" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="246.3418" x2="246.3418" y1="427.9878" y2="447.9878"/><polygon fill="#181818" points="242.3418,437.9878,246.3418,447.9878,250.3418,437.9878,246.3418,441.9878" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="246.3418" x2="246.3418" y1="574.3589" y2="594.3589"/><polygon fill="#181818" points="242.3418,584.3589,246.3418,594.3589,250.3418,584.3589,246.3418,588.3589" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="246.3418" x2="246.3418" y1="628.3276" y2="648.3276"/><polygon fill="#181818" points="242.3418,638.3276,246.3418,648.3276,250.3418,638.3276,246.3418,642.3276" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="246.3418" x2="246.3418" y1="682.2964" y2="702.2964"/><polygon fill="#181818" points="242.3418,692.2964,246.3418,702.2964,250.3418,692.2964,246.3418,696.2964" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="246.3418" x2="246.3418" y1="736.2651" y2="756.2651"/><polygon fill="#181818" points="242.3418,746.2651,246.3418,756.2651,250.3418,746.2651,246.3418,750.2651" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="114.1399" x2="74.5752" y1="372.019" y2="372.019"/><line style="stroke:#181818;stroke-width:1;" x1="74.5752" x2="74.5752" y1="372.019" y2="394.019"/><polygon fill="#181818" points="70.5752,384.019,74.5752,394.019,78.5752,384.019,74.5752,388.019" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="206.7771" x2="246.3418" y1="372.019" y2="372.019"/><line style="stroke:#181818;stroke-width:1;" x1="246.3418" x2="246.3418" y1="372.019" y2="394.019"/><polygon fill="#181818" points="242.3418,384.019,246.3418,394.019,250.3418,384.019,246.3418,388.019" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="74.5752" x2="74.5752" y1="427.9878" y2="808.2339"/><line style="stroke:#181818;stroke-width:1;" x1="74.5752" x2="148.4585" y1="808.2339" y2="808.2339"/><polygon fill="#181818" points="138.4585,804.2339,148.4585,808.2339,138.4585,812.2339,142.4585,808.2339" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="246.3418" x2="246.3418" y1="790.2339" y2="808.2339"/><line style="stroke:#181818;stroke-width:1;" x1="246.3418" x2="172.4585" y1="808.2339" y2="808.2339"/><polygon fill="#181818" points="182.4585,804.2339,172.4585,808.2339,182.4585,812.2339,178.4585,808.2339" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="160.4585" x2="160.4585" y1="1024.9761" y2="1047.4917"/><polygon fill="#181818" points="156.4585,1037.4917,160.4585,1047.4917,164.4585,1037.4917,160.4585,1041.4917" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="160.4585" x2="160.4585" y1="1081.4604" y2="1101.4604"/><polygon fill="#181818" points="156.4585,1091.4604,160.4585,1101.4604,164.4585,1091.4604,160.4585,1095.4604" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="160.4585" x2="160.4585" y1="966.605" y2="991.0073"/><polygon fill="#181818" points="156.4585,981.0073,160.4585,991.0073,164.4585,981.0073,160.4585,985.0073" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="253.7903" x2="271.27" y1="954.605" y2="954.605"/><polygon fill="#181818" points="267.27,1045.4917,271.27,1055.4917,275.27,1045.4917,271.27,1049.4917" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="271.27" x2="271.27" y1="954.605" y2="1145.4604"/><line style="stroke:#181818;stroke-width:1;" x1="271.27" x2="160.4585" y1="1145.4604" y2="1145.4604"/><line style="stroke:#181818;stroke-width:1;" x1="160.4585" x2="160.4585" y1="1145.4604" y2="1165.4604"/><polygon fill="#181818" points="156.4585,1155.4604,160.4585,1165.4604,164.4585,1155.4604,160.4585,1159.4604" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="160.4585" x2="160.4585" y1="922.605" y2="942.605"/><polygon fill="#181818" points="156.4585,932.605,160.4585,942.605,164.4585,932.605,160.4585,936.605" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="160.4585" x2="160.4585" y1="864.2339" y2="888.6362"/><polygon fill="#181818" points="156.4585,878.6362,160.4585,888.6362,164.4585,878.6362,160.4585,882.6362" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="207.8057" x2="293.27" y1="852.2339" y2="852.2339"/><polygon fill="#181818" points="289.27,1017.4917,293.27,1027.4917,297.27,1017.4917,293.27,1021.4917" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="293.27" x2="293.27" y1="852.2339" y2="1177.4604"/><line style="stroke:#181818;stroke-width:1;" x1="293.27" x2="172.4585" y1="1177.4604" y2="1177.4604"/><polygon fill="#181818" points="182.4585,1173.4604,172.4585,1177.4604,182.4585,1181.4604,178.4585,1177.4604" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="160.4585" x2="160.4585" y1="820.2339" y2="840.2339"/><polygon fill="#181818" points="156.4585,830.2339,160.4585,840.2339,164.4585,830.2339,160.4585,834.2339" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="160.4585" x2="160.4585" y1="328.3086" y2="360.019"/><polygon fill="#181818" points="156.4585,350.019,160.4585,360.019,164.4585,350.019,160.4585,354.019" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="160.4585" x2="160.4585" y1="1189.4604" y2="1199.4604"/><line style="stroke:#181818;stroke-width:1;" x1="160.4585" x2="379.5332" y1="1199.4604" y2="1199.4604"/><polygon fill="#181818" points="375.5332,761.7808,379.5332,751.7808,383.5332,761.7808,379.5332,757.7808" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="379.5332" x2="379.5332" y1="316.3086" y2="1199.4604"/><line style="stroke:#181818;stroke-width:1;" x1="379.5332" x2="232.2173" y1="316.3086" y2="316.3086"/><polygon fill="#181818" points="242.2173,312.3086,232.2173,316.3086,242.2173,320.3086,238.2173,316.3086" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="88.6997" x2="24" y1="316.3086" y2="316.3086"/><polygon fill="#181818" points="20,747.7808,24,757.7808,28,747.7808,24,751.7808" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="24" x2="24" y1="316.3086" y2="1211.4604"/><line style="stroke:#181818;stroke-width:1;" x1="24" x2="160.4585" y1="1211.4604" y2="1211.4604"/><line style="stroke:#181818;stroke-width:1;" x1="160.4585" x2="160.4585" y1="1211.4604" y2="1231.4604"/><polygon fill="#181818" points="156.4585,1221.4604,160.4585,1231.4604,164.4585,1221.4604,160.4585,1225.4604" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="160.4585" x2="160.4585" y1="284.3086" y2="304.3086"/><polygon fill="#181818" points="156.4585,294.3086,160.4585,304.3086,164.4585,294.3086,160.4585,298.3086" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="160.4585" x2="160.4585" y1="1265.4292" y2="1285.4292"/><polygon fill="#181818" points="156.4585,1275.4292,160.4585,1285.4292,164.4585,1275.4292,160.4585,1279.4292" style="stroke:#181818;stroke-width:1;"/><!--SRC=[TLBRIWCn47tVhvZ7BCL-mAvj4QdeGrLM1454bjrP4qoJEabGFyfl4FJ7pALfkr1VicJEd7FcpCRObcnHLAZU73fajZMlPLqKOW3sysqwZhsJs2zA40QOqYLOZge0g39s8PtXp7DGzMBmKYlHaGuw5GmPAzwva0XCg1u_u1IYsLIYUh4yIPlVhzBB1j_0XTaCb9Do3sPZRnrL9fFQtr0QJ4LBdq1EGM17or0DSeHMashXblHQ63ocwEcRX4wxrdOSJkQ0H9ekMzLBf4KTsxO9Ot_gOx6hJ70reeoX6FWn3lu4ATfsn56QR13cJhkQWnHhOO_kWR1pP8HMYPtZRekUkZfxU6wMv_VDtTNDzJ_1nqCtcRqyc3vQ6RHiTpTMRmvMah_-Z3_Qlu8T8RJ-0G00]--></g></svg>